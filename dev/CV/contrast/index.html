<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · 9Docs</title><meta name="title" content="- · 9Docs"/><meta property="og:title" content="- · 9Docs"/><meta property="twitter:title" content="- · 9Docs"/><meta name="description" content="Documentation for 9Docs."/><meta property="og:description" content="Documentation for 9Docs."/><meta property="twitter:description" content="Documentation for 9Docs."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">9Docs</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">深度学习</span><ul><li><a class="tocitem" href="../../DL/CNN/">卷积神经网络</a></li><li><a class="tocitem" href="../../DL/stereo/">立体匹配</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/strongnine/9Docs" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/strongnine/9Docs/blob/main/docs/src/CV/contrast.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="直方图统计"><a class="docs-heading-anchor" href="#直方图统计">直方图统计</a><a id="直方图统计-1"></a><a class="docs-heading-anchor-permalink" href="#直方图统计" title="Permalink"></a></h2><h3 id="直方图均衡化"><a class="docs-heading-anchor" href="#直方图均衡化">直方图均衡化</a><a id="直方图均衡化-1"></a><a class="docs-heading-anchor-permalink" href="#直方图均衡化" title="Permalink"></a></h3><p>直方图均衡化（Histogram Equalization）可以增强图像对比度，主要的思想就是通过一个映射函数把一副图像的直方图分布变成近视均匀分布来提高图像的对比度，因此关键就是如何得到映射函数。</p><p class="math-container">\[s_k=\sum_{j=0}^k \frac{n_j}{n}\, k=0,1,2\cdots, L-1\]</p><p>其中，<span>$s_k$</span> 是当前灰度级经过累积分布函数映射之后的值，<span>$n$</span> 是图像中像素的总和，<span>$n_j$</span> 是当前灰度级的像素个数，<span>$L$</span> 是图像中的灰度级别总数。</p><h3 id="基于空间熵的全局对比度增强（SEGCE）"><a class="docs-heading-anchor" href="#基于空间熵的全局对比度增强（SEGCE）">基于空间熵的全局对比度增强（SEGCE）</a><a id="基于空间熵的全局对比度增强（SEGCE）-1"></a><a class="docs-heading-anchor-permalink" href="#基于空间熵的全局对比度增强（SEGCE）" title="Permalink"></a></h3><p>基于空间熵的灰度全局对比度增强（Spatial Entropy-Based Global Image Contrast Enhancement）通过计算图像的空间熵，得到一个可以拉伸像素值的映射函数，从而提高图像的对比度。</p><p>假设图像大小为 <span>$H \times W$</span>，每个像素值为 <span>$x(i, j)$</span>，SEGCE 的计算步骤如下：</p><p>首先将图像 <span>$I$</span> 分成 <span>$M \times N = K$</span> 个区域，对于每一个子区域 <span>$I = \{ i_1, i_2, \dots, i_k \}$</span> 计算灰度空间直方图：</p><p class="math-container">\[h_k = \{ h_k( m, n ) \mid 1 \le m \le M, 1 \le n \le N \}\]</p><p>其中 <span>$h_k(m, n)$</span> 是 <span>$\dots$</span></p><p class="math-container">\[N = \left\lfloor \left( \frac{K}{r} \right)^{\frac{1}{2}} \right\rfloor, M = \lfloor \left( {K}{r} \right)^{\frac{1}{2}} \rfloor\]</p><p>计算空间熵：</p><p class="math-container">\[S_k = -\sum_{m-1}^{M}\sum_{n-1}^{N}h_k(m,n)\log_2(h_k(m,n))\]</p><p>计算离散函数 <span>$f_k$</span></p><p class="math-container">\[f_k = \frac{S_k}{\sum_{l=1,l\neq k}^{K} S_l}\]</p><p>离散函数 <span>$f_k$</span> 衡量灰度 <span>$k$</span> 相比其它灰度级的重要性。计算累计分布函数之前对齐进行归一化</p><p class="math-container">\[f_k = \frac{f_k}{\sum_{l=1}^{K}f_l}\]</p><p>计算累计分布函数 <span>$F(k)$</span></p><p class="math-container">\[F_k=\sum_{l=1}^{k}f_l\]</p><p>将映射函数拉伸到 <span>$[0, 255]$</span>，获取映射函数</p><p class="math-container">\[y_k = \lfloor F_k(y_u - y_d) + y_d \rfloor\]</p><p>将原图像素利用映射函数得到新的对比度增强的图像。</p><p>应用问题总结：</p><ol><li>对灰度图计算映射函数，然后使用同一个函数分别对 BGR 三个通道进行计算，效果可以，缺点是会使得画面偏暗；</li><li>对 BGR 三个通道分别计算映射函数，缺点是会导致偏色；</li></ol><h3 id="自适应及集成领域依赖方法的非线性增强（AINDANE）"><a class="docs-heading-anchor" href="#自适应及集成领域依赖方法的非线性增强（AINDANE）">自适应及集成领域依赖方法的非线性增强（AINDANE）</a><a id="自适应及集成领域依赖方法的非线性增强（AINDANE）-1"></a><a class="docs-heading-anchor-permalink" href="#自适应及集成领域依赖方法的非线性增强（AINDANE）" title="Permalink"></a></h3><p>参考论文《Adaptive and integrated neighborhood-dependent approach for nonlinear enhancement of color images》，算法有三个步骤：</p><ol><li><strong>全局曲线调整</strong>：根据图像亮度分布建立一个自适应的全局映射函数，作用是提高图像暗部像素值，压缩图像动态范围</li><li><strong>自适应对比度增强</strong>：根据像素领域内的平均值和线束值本身比例做映射，自适应增强对比度</li><li><strong>颜色恢复</strong></li></ol><h4 id="全局曲线调整"><a class="docs-heading-anchor" href="#全局曲线调整">全局曲线调整</a><a id="全局曲线调整-1"></a><a class="docs-heading-anchor-permalink" href="#全局曲线调整" title="Permalink"></a></h4><p>计算出彩色图像的亮度值，可以有以下方法：</p><ol><li>YUV 空间的 Y 通道；</li><li>HSL 空间的 L 分量；</li><li>对比度保留去色；</li></ol><p>论文里使用的公式如下：</p><p class="math-container">\[I(x,y) = \frac{76.245 I_R(x,y) + 149.685I_G(x,y) + 29.07I_B(x,y)}{255}\]</p><p>通过归一化后得到：</p><p class="math-container">\[I_n(x,y) = \frac{I(x,y)}{255}\]</p><p>使用下面的映射函数来增强图像亮度：</p><p class="math-container">\[I^{\prime}_{n} = \frac{I_n^{(0.75z+0.25)+(1-I_n)0.4(1-z)+I_n^{(2-z)}}}{2}\]</p><p>其中参数 <span>$z$</span> 值由图像本身内容决定：</p><p class="math-container">\[z = \begin{cases}
0                &amp; \text{for }L\le 50      \\
\frac{L-50}{100} &amp; \text{for }50&lt;L\le 150  \\
1                &amp; \text{for }L\le 150       
\end{cases}\]</p><p>其中 <span>$L$</span> 表示亮度图像的累计直方图（CDF）达到 0.1 时的色阶值，即亮度图像中从小到大排序的前 90% 色阶值的最大值</p><h4 id="自适应对比度增强"><a class="docs-heading-anchor" href="#自适应对比度增强">自适应对比度增强</a><a id="自适应对比度增强-1"></a><a class="docs-heading-anchor-permalink" href="#自适应对比度增强" title="Permalink"></a></h4><p>全局对比度增强算法的思想是使得图像中亮的像素更亮，暗的像素更暗，提高了图像的动态范围，这与第一步的全局曲线调整是相反的。论文中提出的方法考虑了邻域的信息，如果当前的像素值比周边像素的平均值比较大的时候，增大当前像素值；如果当前的像素值比周边像素平均值比较小时，减小当前像素值。这种操作可以同时提高图像的对比度和细节、压缩图像动态范围。</p><p>邻域信息的计算可以用高斯模糊，对比度增强图像 <span>$S(x,y)$</span> 的计算如下：</p><p class="math-container">\[S(x,y) = 255I^{\prime}_n(x,y)^{E(x,y)}\]</p><p>指数 Mask 计算如下：</p><p class="math-container">\[E(x,y) = r(x,y)^{P} = \left[ \frac{I_{\text{conv}}(x,y)}{I(x,y)} \right]^{P}\]</p><p>其中 <span>$I_{\text{conv}}(x,y)$</span> 是对亮度图进行卷积后的结果，<span>$P$</span> 是衡量原始图像对比度的值，如果原始图像对比度比较差，<span>$P$</span> 值应该较大，可以通过计算原始图像亮度图的全局均方差来决定：</p><p class="math-container">\[P = \begin{cases}
3                &amp; \text{for }\sigma \le 3      \\
\frac{27-2\sigma}{7} &amp; \text{for }3&lt;L\le 10  \\
1                &amp; \text{for }\sigma \le 10       
\end{cases}\]</p><p>当卷积值 <span>$I_{\text{conv}}(x,y)$</span> 小于原始值 <span>$I(x,y)$</span> 的时候，代表中心点亮度大于周边亮度，此时 <span>$E(x,y)&lt;1$</span>，最终算得 <span>$S(x,y) &gt; I^{\prime}_n(x,y)$</span>，亮的会更亮；如果卷积值大于原始值，代表中心点亮度小于周边亮度，此时 <span>$E(x,y)&gt;1$</span>，最终算得 <span>$S(x,y) &lt; I^{\prime}_n(x,y)$</span>，导致暗的地方更暗。</p><p>在这里可以做多个尺度的卷积和增强，来获取不同的领域信息。当尺度较小的时候，能够提高局部对比度，尺度较大时，虽然损失了细节，但是可以结合更多的全局信息。在多尺度下可以使用以下公式：</p><p class="math-container">\[S(x,y) = \sum_{i}w_i S_i(x,y)\]</p><p>尺度的选择可以设置固定值，也可以根据图像大小进行自适应调整。</p><h4 id="颜色恢复"><a class="docs-heading-anchor" href="#颜色恢复">颜色恢复</a><a id="颜色恢复-1"></a><a class="docs-heading-anchor-permalink" href="#颜色恢复" title="Permalink"></a></h4><p>颜色恢复计算公式：</p><p class="math-container">\[S_j(x,y) = S(x,y)\frac{I_j(x,y)}{I(x,y)}\lambda_j\]</p><p>通常 <span>$\lambda=1$</span> 可以保证图像整体没有色彩偏移。</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 11 October 2025 07:59">Saturday 11 October 2025</span>. Using Julia version 1.12.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
